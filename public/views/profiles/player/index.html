<section ng-controller="PlayerProfileController">
    <div class="sk-three-bounce" ng-show="!loaded">
        <div class="sk-child sk-bounce1"></div>
        <div class="sk-child sk-bounce2"></div>
        <div class="sk-child sk-bounce3"></div>
        <p class="caption center-align">
            Loading
        </p>
    </div>
    <div ng-if="loaded">
        <div class="row row-no-margin center-align">
            <h1 class="header-no-margin {{ service.data.factionAbv }}-table-text">
                <span ng-if="service.data.outfit.data.tag">[{{ service.data.outfit.data.tag }}]</span>
                {{ service.data.name }}
            </h1>
            <p class="caption">
                All stats below are gathered from recorded alert metrics
            </p>
            <p>
                <a href="{{ config.baseUrl }}/profiles/player/{{service.data.id }}">
                    Permalink <i class="fa fa-chain"></i>
                </a>
            </p>
        </div>
        <div class="col l8 m7 s12 no-padding">
            <div ng-include="'views/profiles/player/stats.html'"></div>
            <div class="row row-no-margin">
                <div class="col l3 m4 s6">
                    <div class="card blue-grey darken-3">
                        <div class="card-content center-align">
                            <h2>
                                {{ service.metrics.deathsPerAlert }}
                            </h2>
                            <p class="caption">
                                Avg Deaths / Alert
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col l4 m5 s12">
            <h4 class="center-align">
                {{ service.data.metrics.data.involved }} Alerts recorded for this player
            </h4>
            <table id="alert-list"></table>
            <p class="caption center-align">
                Please note, some very old alerts (less than ID 5,000) may not be fully compatible with the site, as new data was added since.
            </p>
        </div>

        <div class="row row-no-margin">
            <div class="col s12 center-align">
                <p class="caption">
                    For full player statistics unrelated to alerts, here's the best sites. Please let the creators know PS2Alerts is linking them! <i class="fa fa-heart"></i>
                </p>
                <a
                    href="http://stats.dasanfall.com/ps2/player/{{ service.data.name }}"
                    class="waves-effect waves-light btn"
                    target="_blank">
                    Dasanfall <i class="fa fa-link"></i>
                </a>
                <a
                    href="http://ps2.fisu.pw/player/?name={{ service.data.name | lowercase }}"
                    class="waves-effect waves-light btn"
                    target="_blank">
                    Fisu <i class="fa fa-link"></i>
                </a>
                <a
                    href="http://www.voidwell.com/#/ps2/player/{{ service.data.id }}"
                    class="waves-effect waves-light btn"
                    target="_blank">
                    Voidwell <i class="fa fa-link"></i>
                </a>
                <a
                    href="https://www.planetside2.com/players/#!/{{ service.data.id }}"
                    class="waves-effect waves-light btn"
                    target="_blank">
                    PS2 Players <i class="fa fa-link"></i>
                </a>
            </div>
        </div>

        <div class="row row-no-margin">
            <div class="col l5 m6 s12">
                <h2 class="center-align">
                    Weapons
                </h2>
                <h4 class="center-align">
                    {{ service.data.weapons.data.length }} Weapons recorded for this player
                </h4>
                <table id="weapon-list"></table>
            </div>
            <div class="col l7 m6 s12">
                <h2 class="center-align">
                    Vehicles
                </h2>
                <h4 class="center-align">
                    {{ service.data.vehicles.data.length }} Vehicles recorded for this player
                </h4>
                <table id="vehicle-list"></table>
                <p class="caption">
                    Please note, vehicle statistics are notoriously hard to calculate correctly on a per-player basis, the above statistics likley to be entirely wrong. I am considering wiping vehicle related statistics and start a-new.
                </p>
            </div>
        </div>
    </div>
</section>
