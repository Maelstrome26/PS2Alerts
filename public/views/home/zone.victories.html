<div class="col s12 m6 no-padding">
    <div class="col s12">
        <div class="card blue-grey darken-3">
            <div class="card-content">
                <div class="row">
                    <h2 class="center-align">
                        Global Continent Victories
                    </h2>
                    <p class="center-align caption">
                        <i class="fa fa-info-circle"></i> Breakdown of each faction's victories on a per-continent basis
                    </p>
                </div>

                <div ng-repeat="(zone, metrics) in zoneStats.zoneTotals">
                    <div class="row breakdown-row">
                        <div class="col s4 m3 l2">
                            <p>
                                {{::config.zoneNames[zone]}}
                            </p>
                        </div>
                        <div class="col s8 m9 l10">
                            <territory-bar
                                vs="{{metrics.vs}}"
                                nc="{{metrics.nc}}"
                                tr="{{metrics.tr}}"
                                draw="{{metrics.draw}}"
                                total="{{metrics.vs + metrics.nc + metrics.tr + metrics.draw}}"
                                decimal="1">
                            </territory-bar>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col s12 no-padding">
    <div class="col s12">
        <div class="card blue-grey darken-3">
            <div class="card-content">
                <div class="row">
                    <h2 class="center-align">
                        Per-Server Continental Victories
                    </h2>
                    <p class="center-align caption">
                        <i class="fa fa-info-circle"></i> Shows the breakdown of each Server's victories by Continent.
                    </p>
                </div>
                <div class="row" id="server-zone-breakdown">
                    <div class="col m2 l1 hidden-s">
                        <div ng-repeat="(key, server) in config.servers" class="breakdown-row">
                            <p>
                                {{::config.serverNames[server]}}
                            </p>
                        </div>
                    </div>
                    <div class="col s12 m10 l11 no-padding">
                        <div ng-repeat="(zones, servers) in zoneStats.zones" class="col s12 m3 no-padding">
                            <div ng-repeat="(server, metrics) in servers" class="row breakdown-row segments-small">
                                <div class="col s3 visible-s">
                                    <p>
                                        {{::config.serverNames[server]}}
                                    </p>
                                </div>
                                <div class="col s9 m12">
                                    <territory-bar
                                        vs="{{metrics.vs}}"
                                        nc="{{metrics.nc}}"
                                        tr="{{metrics.tr}}"
                                        draw="{{metrics.draw}}"
                                        total="{{metrics.vs + metrics.nc + metrics.tr + metrics.draw}}"
                                        decimal="1">
                                    </territory-bar>
                                </div>
                            </div>
                            <p class="center-align caption">
                                {{::config.zoneNames[zones]}}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col s12 m6 offset-m3 center-align">
                        <a href="#" id="per-server-percentage" ng-click="changePerServerZone('percentage')" class="btn waves-effect waves-light" ng-class="perServerShown == 'numerical' ? 'btn-inactive' : ''">
                            Show Percentages
                        </a>
                        <a href="#" id="per-server-numeric" ng-click="changePerServerZone('numerical')" class="btn waves-effect waves-light" ng-class="perServerShown == 'percentage' ? 'btn-inactive' : ''">
                            Show Numerical
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col s12 no-padding">
    <div class="col s12">
        <div class="card blue-grey darken-3">
            <div class="card-content">
                <div class="row">
                    <h2 class="center-align">
                        Faction Victory Contribution by Server
                    </h2>
                    <p class="center-align caption">
                        <i class="fa fa-info-circle"></i> Shows the contribution of each server to their factions's victories. Hover over (or tap on mobile) each segment for more detail.
                    </p>
                </div>
                <div class="row">
                    <div class="col s12" id="faction-victory-breakdown">
                        <div class="territory-bar z-depth-1 grey darken-3">
                            <div class="loading" ng-hide="loaded">
                                <i class="fa fa-refresh fa-spin"></i>
                            </div>
                            <div
                                ng-repeat="(faction, servers) in zoneStats.serverEmpireStats"
                                class="segment {{faction}}-segment segments-small"
                                style="width: {{zoneStats.serverEmpireTotals[faction] / zoneStats.serverEmpireTotals.all * 100 | number: 2}}%"
                                ng-hide="!loaded">
                                <div
                                    ng-repeat="(server, data) in servers"
                                    class="faction-contribution-segment segment-metric tooltipped"
                                    style="width: {{data.value / zoneStats.serverEmpireTotals[faction] * 100 | number: 2}}%"
                                    data-tooltip="{{::config.serverNames[data.server]}} | {{data.value}} | {{data.value / zoneStats.serverEmpireTotals[faction] * 100 | number: 2}}% of faction victories"
                                    ng-if="server != 'total'">
                                    <span ng-if="faction != 'draw'" class="hidden-s">{{data.value}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" id="faction-victory-tables">
                    <div
                        class="col s12 m4"
                        ng-repeat="(faction, servers) in zoneStats.serverEmpireStats"
                        ng-if="faction != 'draw'">
                        <div class="row header-row">
                            <h3 class="center-align">
                                {{::faction | uppercase}} Breakdown
                            </h3>
                            <div class="col s3">
                                Server
                            </div>
                            <div class="col s3 center-align">
                                Wins
                            </div>
                            <div class="col s3 center-align">
                                %
                            </div>
                            <div class="col s3 center-align">
                                % of all
                            </div>
                            <hr />
                        </div>
                        <div
                            class="row metric-row"
                            ng-repeat="value in servers"
                            ng-if="server != 'total'">
                            <div class="col s3">
                                <span class="metric">
                                    {{::config.serverNames[value.server]}}
                                </span>
                            </div>
                            <div class="col s3 center-align">
                                <span class="metric">
                                    {{value.value}}
                                </span>
                            </div>
                            <div class="col s3 center-align">
                                <span class="metric">
                                    {{value.value / zoneStats.serverEmpireTotals[faction] * 100 | number: 1}}%
                                </span>
                            </div>
                            <div class="col s3 center-align">
                                <span class="metric">
                                    {{value.value / zoneStats.serverEmpireTotals.all * 100 | number: 1}}%
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
