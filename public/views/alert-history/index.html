<section ng-controller="AlertHistoryController as AlertHistroyCtrl">
    <div class="row center-align flow-text">
        <h1 class="header-no-margin">Alert History</h1>
    </div>

    <div class="col s12">
        <div class="card blue-grey darken-3">
            <div class="card-content">
                <div class="row row-no-margin filters">
                    <div class="col s12 m8 l4 center-align">
                        <button
                            ng-repeat="server in config.serversAlpha"
                            ng-class="selectedServers.indexOf(server) == -1 ? 'btn-inactive' : ''"
                            class="btn waves-effect waves-light"
                            ng-click="toggleServer(server)">
                                {{::config.serverNames[server]}}
                        </button>
                        <p class="caption center-align">Servers</p>
                    </div>
                    <div class="col s12 m4 l3 center-align">
                        <button
                            ng-repeat="zone in config.zonesAlpha"
                            ng-class="selectedZones.indexOf(zone) == -1 ? 'btn-inactive' : ''"
                            class="btn waves-effect waves-light"
                            ng-click="toggleZone(zone)">
                                {{::config.zoneNames[zone]}}
                        </button>
                        <p class="caption center-align">Zones</p>
                    </div>
                    <div class="col s12 m4 l2 center-align">
                        <button
                            ng-repeat="faction in config.factions"
                            ng-class="selectedFactions.indexOf(faction) == -1 ? 'btn-inactive' : '{{faction}}-back'"
                            class="btn waves-effect waves-light"
                            ng-click="toggleFaction(faction)">
                                {{faction|uppercase}}
                        </button>
                        <p class="caption center-align">Factions</p>
                    </div>
                    <div class="col s12 m8 l3 center-align">
                        <button
                            ng-repeat="(bracket, info) in config.timeBrackets"
                            ng-class="selectedBrackets.indexOf(bracket) == -1 ? 'btn-inactive' : ''"
                            ng-click="toggleBracket(bracket)"
                            class="btn waves-effect waves-light tooltipped"
                            data-tooltip="{{info.desc}}"
                            data-position="top">
                                {{info.label}}
                        </button>
                        <p class="caption center-align" ng-init="setTooltips()">Time Brackets</p>
                    </div>
                    <div class="col s12 flow-text center-align">
                        <button class="btn btn-large btn-apply waves-effect waves-light">                             <i class="fa fa-filter"></i> Filter
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row row-no-margin" id="history-list">
        <div class="col s12">
            <div class="row center-align flow-text">
                <h6 ng-hide="!data.history.length">Showing {{data.history.length}} Results</h6>
            </div>
            <div class="sk-three-bounce" ng-show="!data.history.length">
                <div class="sk-child sk-bounce1"></div>
                <div class="sk-child sk-bounce2"></div>
                <div class="sk-child sk-bounce3"></div>
                <p class="caption center-align">
                    Loading
                </p>
            </div>
            <div ng-repeat="(key, alert) in data.history"
                history-row
                metrics="alert"
                config="config">
            </div>
        </div>
    </div>
</section>
